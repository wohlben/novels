{% extends "base.html" %}
{% load values %}
{% block content %}
<div class="container">
  <div class="row">
    <a class="col text-center" onclick="setGetParam('watching', true);" title="only show watched novels">
    {% if request.GET.watching %}
      <div class="bg-light pb-2 active">show only chapters of watched novels</div>
    {% else %}
      <div class="pb-2">show only chapters of watched novels</div>
    {% endif %}
    </a>
    <a class="col text-center" onclick="setGetParam('watching');" title="show all updates">
    {% if request.GET.watching %}
      <div class="pb-2"> show all new chapters</div>
    {% else %}
      <div class="pb-2 bg-light active"> show all new chapters</div>
    {% endif %}
    </a>
  </div>
  <hr />
  <table class="table">
    <thead>
        <th>Releas Date</th>
        <th>Fiction</th>
        <th>Chapter</th>
    </thead>
    <tbody>
    {% for chapter in chapters %}
      <tr>
        <td>
          {% firstof chapter.published chapter.discovered %}
        </div>
        <td>
          <a href="{{ chapter.fiction.get_absolute_url }}">{{ chapter.fiction.title }}</a>
        </td>
        <td title="Visit {{ chapter.fiction.title }}: {{ chapter.title }}">
        {% if request.user.is_authenticated and request.user.internal_links %}
          <a href="{{ chapter.get_absolute_url }}">{{ chapter.title }}</a>
        {% else %}
          <a href="{{ chapter.url }}">{{ chapter.title }}</a>
        {% endif %}
        </td>
    </tr>
    {% endfor %}
    </tbody>
</table>
</div>

<hr />

{% with object=chapters paginate_id="paginate2" %}
{% include "pagination.html" %}
{% endwith %}
{% endblock %}
